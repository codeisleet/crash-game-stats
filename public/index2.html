<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
</head>
<body>

    
    <div id="main-div" style=" align-items: center; margin: 100 auto;display: block; position: static;  font-weight: 999; font-family: monospace; width: 1600; height: 500; border: 1px solid black; font-size: 14px;">
        
        <div style="text-align: center;" id="info1"></div>
        <div id="left-data"  style="border-bottom: 2px solid red; padding-right: 20px; text-align: right; width: 430px;display: inline-block;"></div>
        
        <div id="right-data" style="border-bottom: 2px solid red;  padding-left: 20px; margin-block-end: 0; margin-block-start: 0;  width: 1110px;display: inline-block;"></div>
        
        <button style="width: 250px; height: 40px; margin: 50px auto; display: block; border: 3px dashed red; border-radius: 50%; font-weight: 900;" onclick="fuckU()">RELOAD</button>
        
    </div>
    
    
    <script>
        let counter = 0;
        
        async function fuckU() {

            const iss_url = "https://api.wheretheiss.at/v1/satellites";
            const url_to_call = "http://nftbulgaria.info:34567";
            
            let the_url = await window.location.href;
            let url = await new URL(the_url);
           // console.log("URL: " + url);
            let paramVal = url.searchParams.get('hash');

            console.log("HASH " + paramVal);
            let toCall = await (url_to_call + "/hash/" + paramVal);
            const data = await fetch(toCall);
            const dataJson = await data.json();
            await console.log("JSON DATA: ");
            await console.log(dataJson);
            
            //   const {a, b} = dataJson;
            // document.getElementById('main-div').innerText = "AAA: " + a + ", BBB: " + b;
            
            var left_div = await document.getElementById('left-data');
            var right_div = await document.getElementById('right-data');
            // left_div.innerHTML = "";
            // right_div.innerHTML = "";
            document.getElementById('info1').innerHTML = await ("<p>" + dataJson[0] + "</p><p>"+ dataJson[1] + "</p>");
            
            for(let i = 2; i < dataJson.length;i++){
                let row = await ("" + dataJson[i]).split("|");
                // console.log("row size- " + row.length + "  " + row);
                if(row.length != 2) continue;
                let left = await document.createElement('p');
                let right = await document.createElement('p');
                left.innerHTML = await row[0];
                right.innerHTML = await row[1];
                console.log("" + i + " " + left);
                console.log(right);
                
                await left_div.appendChild(left);
                await right_div.appendChild(right);
            }
            
        }
        fuckU();
    </script>
</body>
</html>
